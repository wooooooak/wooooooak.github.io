---
layout: post
title: 클린코드_형식 마추기
category: Clean Code
tags: [book]
comments: true
---

코드형식은 중요하다! 너무 중요해서 무시하기 어렵다. 너무나도 중요하므로 융통성 없이 맹목적으로 따르면 안 된다. 오늘 구현한 코드의 가독성은 앞으로 바뀔 코드의 품질에 지대한 영향을 미친다.

## 적절한 행 길이를 유지하라

500줄을 넘지 않고 대부분 200줄 정도인 파일로도 커다란 시스템을 구축할 수 있다. 반드시 지킬 엄격한 규칙은 아니지만 바람직한 규칙으로 삼으면 좋겠다. 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.

### 신문 기사처럼 작성하라

이름은 간단하면서도 설명이 가능하게 짓는다. 이름만 보고도 올바른 모듈을 살펴보고 있는지 아닌지를 판단할 정도로 신경 써서 짓는다. 소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명한다. 아래로 내려갈수록 의도를 세세하게 묘사한다. 마지막에는 가장 저차원 함수와 세부 내역이 나온다.

### 세로 밀집도

줄바꿈이 개념을 분리한다면 세로 밀집도는 연관성을 의미한다. 즉, 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다는 뜻이다.

### 수직거리

함수 연관 관계와 동작 방식을 이해하려고 이 함수에서 저 함수로 오가며 소스 파일을 위아래로 뒤지는 등 뺑뺑이를 돌았으나 결국은 미로 같은 코드 때문에 혼란만 가중된 경험이 있는가?(있다...)

서로 밀접한 개념은 세로로 가까이 둬야한다. 타당한 근거가 없다면 당연히 서로 밀접한 개념은 한 파일에 속해야 마땅하다.

같은 파일에 속할 정도로 밀접한 두 개념은 세로 거리로 연관성을 표현한다. 여기서 연관성이란 한 개념을 이해하는 데 다른 개념이 중요한 정도다.

#### 인스턴스 변수

인스턴스 변수는 클래스 맨 처음에 선언한다. 변수 간에 세로로 거리를 두지 않는다. 이 것은 클래스의 마지막에 놓느냐, 맨 처음에 놓느냐 하는 논쟁이 있으나 사실 그 것은 크게 중요하지 않다. 팀에 속해있다면 팀의 규칙에 따르면 되는 부분이고 중요한 것은 인스턴스 변수를 모은다는 사실이다.

#### 종속함수

한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다. 또한 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다. 독자는 방금 호출한 함수가 잠시 후에 정의되리라는 사실을 예측한다.

## 가로 형식 마추기

저자는 좋은 코드 규칙을 위해 프로젝트 7개를 조사했다. 결과가 놀랍도록 규칙적이다. 20 자에서 60자 사이인 행이 총 행 수의 40%에 달한다. 10자 미만은 30% 정도로 보인다. 80자 이후부터 행 수는 급격하게 감소한다. 프로그래머는 명백하게 짧은 행을 선호한다.

80자 제한을 말하는 사람들이 있다. 짧은 코드가 좋은 것은 맞지만, 요즘은 모니터가 크기 때문에 저자는 개인적으로 120자 정도로 행 길이를 제한한다고 한다.

### 가로 공백과 밀집도

가로로는 공백을 사용해 밀접한 개념과 느슨한 개념을 포현한다. 공백(' ')을 넣으면 한 개념이 아니라 별개로 보인다. 예를 들어 함수를 호출하는 코드에서 괄호 안 인수는 공백으로 분리하고 쉼표를 강조해 인수가 별개라는 사실을 보여준다. 반면 함수 이름과 이어지는 괄호 사이에는 공백을 넣지 않는다.

```java
private void measureLine(String line) {
	lineCount++;
    int lineSize = line.length();
    totalChars += lineSize;
    lineWidhHistogram.addLine(lineSize, lineCount);
    recordWidestLine(lineSize);
}
```
